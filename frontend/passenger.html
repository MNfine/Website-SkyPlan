<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="title" data-i18n-target="document-title">SkyPlan - Thông Tin Hành Khách</title>

  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="assets/styles/reset.css">
  <link rel="stylesheet" href="assets/styles/index.css">
  <link rel="stylesheet" href="assets/styles/flags.css">
  <link rel="stylesheet" href="assets/styles/header.css">
  <link rel="stylesheet" href="assets/styles/footer.css">
  <link rel="stylesheet" href="assets/styles/passenger.css">

  <!-- Shared translations (header/footer), then page translations, then page logic -->
  <script src="./assets/scripts/index_translations.js" defer></script>
  <script src="./assets/scripts/passenger_translations.js" defer></script>
  <script src="./assets/scripts/passenger.js" defer></script>
</head>
<body>
  <!-- Header will be injected here -->
  <div id="header-container"></div>

  <main class="main-content">
    <div class="container">
      <!-- Progress bar -->
      <div class="progress-bar-wrapper">
        <div class="progress-bar">
          <div class="progress-container">
            <div class="progress-line-start"></div>

            <!-- Step 1 -->
            <div class="progress-step">
              <div class="step-circle completed"><span>1</span></div>
              <span class="step-label" data-i18n="steps.0">Tìm kiếm</span>
            </div>
            <div class="step-line completed"></div>

            <!-- Step 2 -->
            <div class="progress-step">
              <div class="step-circle completed"><span>2</span></div>
              <span class="step-label" data-i18n="steps.1">Chọn chuyến bay</span>
            </div>
            <div class="step-line completed"></div>

            <!-- Step 3 -->
            <div class="progress-step">
              <div class="step-circle completed"><span>3</span></div>
              <span class="step-label" data-i18n="steps.2">Chọn giá</span>
            </div>
            <div class="step-line completed"></div>

            <!-- Step 4 (active) -->
            <div class="progress-step">
              <div class="step-circle completed"><span>4</span></div>
              <span class="step-label" data-i18n="steps.3">Thông tin khách hàng</span>
            </div>
            <div class="step-line incomplete"></div>

            <!-- Step 5 -->
            <div class="progress-step">
              <div class="step-circle"><span>5</span></div>
              <span class="step-label" data-i18n="steps.4">Dịch vụ thêm</span>
            </div>
            <div class="step-line incomplete"></div>

            <!-- Step 6 -->
            <div class="progress-step">
<div class="step-circle"><span>6</span></div>
              <span class="step-label" data-i18n="steps.5">Thanh toán</span>
            </div>

            <div class="progress-line-end"></div>
          </div>
        </div>
      </div>

      <!-- Passenger form -->
      <div class="form-card">
        <div class="form-header">
          <h2 id="form-header-title" data-i18n="passengerHeader">THÔNG TIN HÀNH KHÁCH</h2>
          <div class="form-header-line"></div>
        </div>

        <form id="passengerForm" novalidate>
          <div class="form-grid">
            <!-- Last name -->
            <div class="form-group">
              <label for="lastname" data-i18n="lbl.lastname" data-i18n-target="label">Họ <span class="required">*</span></label>
              <input type="text" id="lastname" name="lastname" placeholder="Nhập họ"
                     data-i18n="ph.lastname" data-i18n-target="placeholder" autocomplete="family-name">
              <span class="error-message" id="lastname-error"></span>
            </div>

            <!-- First name -->
            <div class="form-group">
              <label for="firstname" data-i18n="lbl.firstname" data-i18n-target="label">Tên <span class="required">*</span></label>
              <input type="text" id="firstname" name="firstname" placeholder="Nhập tên"
                     data-i18n="ph.firstname" data-i18n-target="placeholder" autocomplete="given-name">
              <span class="error-message" id="firstname-error"></span>
            </div>

            <!-- National ID (CCCD/CMND) -->
            <div class="form-group full-width">
              <label for="cccd" data-i18n="lbl.cccd" data-i18n-target="label">Số CCCD/CMND <span class="required">*</span></label>
              <input type="text" id="cccd" name="cccd" placeholder="Nhập số CCCD/CMND"
                     data-i18n="ph.cccd" data-i18n-target="placeholder"
                     maxlength="12" inputmode="numeric" pattern="[0-9]*">
              <span class="error-message" id="cccd-error"></span>
            </div>

            <!-- Date of birth -->
            <div class="form-group">
              <label for="dob" data-i18n="lbl.dob" data-i18n-target="label">Ngày sinh <span class="required">*</span></label>
              <input type="text" id="dob" name="dob" placeholder="DD/MM/YYYY"
                     data-i18n="ph.dob" data-i18n-target="placeholder" inputmode="numeric">
              <span class="error-message" id="dob-error"></span>
            </div>

            <!-- Gender -->
            <div class="form-group">
              <label for="gender" data-i18n="lbl.gender" data-i18n-target="label">Giới tính <span class="required">*</span></label>
              <select id="gender" name="gender">
                <option value="" data-i18n="gender.0">Chọn giới tính</option>
                <option value="male" data-i18n="gender.1">Nam</option>
<option value="female" data-i18n="gender.2">Nữ</option>
                <option value="other" data-i18n="gender.3">Khác</option>
              </select>
              <span class="error-message" id="gender-error"></span>
            </div>

            <!-- Phone number -->
            <div class="form-group">
              <label for="phoneNumber" data-i18n="lbl.phone" data-i18n-target="label">Số điện thoại <span class="required">*</span></label>
              <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="Nhập số điện thoại"
                     data-i18n="ph.phone" data-i18n-target="placeholder"
                     maxlength="10" inputmode="tel" autocomplete="tel">
              <span class="error-message" id="phoneNumber-error"></span>
            </div>

            <!-- Email -->
            <div class="form-group">
              <label for="email" data-i18n="lbl.email" data-i18n-target="label">Email <span class="required">*</span></label>
              <input type="email" id="email" name="email" placeholder="Nhập email"
                     data-i18n="ph.email" data-i18n-target="placeholder" autocomplete="email">
              <span class="error-message" id="email-error"></span>
            </div>

            <!-- Permanent address -->
            <div class="form-group full-width">
              <label for="address" data-i18n="lbl.address" data-i18n-target="label">Địa chỉ thường trú <span class="required">*</span></label>
              <input type="text" id="address" name="address" placeholder="Nhập địa chỉ thường trú"
                     data-i18n="ph.address" data-i18n-target="placeholder" autocomplete="street-address">
              <span class="error-message" id="address-error"></span>
            </div>

            <!-- City/Province -->
            <div class="form-group" id="city-group">
              <label for="city" data-i18n="lbl.city" data-i18n-target="label">Tỉnh/Thành phố <span class="required">*</span></label>
              <select id="city" name="city">
                <option value="" data-i18n="cityDefault">Chọn tỉnh/thành phố</option>
                <option value="Hà Nội">Hà Nội</option>
                <option value="Hồ Chí Minh">Hồ Chí Minh</option>
                <option value="Đà Nẵng">Đà Nẵng</option>
                <option value="Hải Phòng">Hải Phòng</option>
                <option value="Cần Thơ">Cần Thơ</option>
                <option value="other" data-i18n="other">Khác</option>
              </select>
              <span class="error-message" id="city-error"></span>
            </div>

            <!-- Custom city input -->
            <div class="form-group" id="customCity-group" style="display: none;">
              <label for="customCity" data-i18n="lbl.customCity" data-i18n-target="label">Nhập tỉnh/thành phố <span class="required">*</span></label>
<input type="text" id="customCity" name="customCity" placeholder="Nhập tỉnh/thành phố của bạn"
                     data-i18n="ph.customCity" data-i18n-target="placeholder">
              <span class="error-message" id="customCity-error"></span>
            </div>

            <!-- Nationality -->
            <div class="form-group" id="nationality-group">
              <label for="nationality" data-i18n="lbl.nationality" data-i18n-target="label">Quốc tịch <span class="required">*</span></label>
              <select id="nationality" name="nationality">
                <option value="Việt Nam">Việt Nam</option>
                <option value="Lào">Lào</option>
                <option value="Campuchia">Campuchia</option>
                <option value="Thái Lan">Thái Lan</option>
                <option value="Singapore">Singapore</option>
                <option value="Malaysia">Malaysia</option>
                <option value="Indonesia">Indonesia</option>
                <option value="Philippines">Philippines</option>
                <option value="Myanmar">Myanmar</option>
                <option value="Brunei">Brunei</option>
                <option value="Hàn Quốc">Hàn Quốc</option>
                <option value="Nhật Bản">Nhật Bản</option>
                <option value="Trung Quốc">Trung Quốc</option>
                <option value="Hoa Kỳ">Hoa Kỳ</option>
                <option value="Anh">Anh</option>
                <option value="Pháp">Pháp</option>
                <option value="Đức">Đức</option>
                <option value="Úc">Úc</option>
                <option value="Canada">Canada</option>
                <option value="other" data-i18n="other">Khác</option>
              </select>
              <span class="error-message" id="nationality-error"></span>
            </div>

            <!-- Custom nationality input -->
            <div class="form-group" id="customNationality-group" style="display: none;">
              <label for="customNationality" data-i18n="lbl.customNationality" data-i18n-target="label">Nhập quốc tịch <span class="required">*</span></label>
              <input type="text" id="customNationality" name="customNationality" placeholder="Nhập quốc tịch của bạn"
                     data-i18n="ph.customNationality" data-i18n-target="placeholder">
              <span class="error-message" id="customNationality-error"></span>
            </div>

            <!-- Notes -->
            <div class="form-group full-width">
              <label for="notes" data-i18n="lbl.notes" data-i18n-target="label">Ghi chú</label>
              <textarea id="notes" name="notes" rows="4" placeholder="Nhập ghi chú (nếu có)"
                        data-i18n="ph.notes" data-i18n-target="placeholder"></textarea>
              <div class="char-counter" data-i18n="notesCounter">Tối đa 500 ký tự</div>
            </div>
          </div>

          <!-- Confirmation checkbox -->
<div class="form-checkbox">
            <label class="checkbox-label">
              <input type="checkbox" id="confirm" name="confirm" class="custom-checkbox">
              <span class="checkbox-text" data-i18n="terms">Tôi đồng ý với điều khoản</span>
            </label>
            <span class="error-message" id="confirm-error"></span>
          </div>

          <!-- Submit button -->
          <div class="form-submit">
            <button type="submit" class="btn-submit" data-i18n="submit">Xác nhận thông tin</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <!-- Footer will be injected here -->
  <div id="footer-container"></div>

  <!-- Load header & footer; passenger_translations.js -->
  <script>
    (function () {
      function applyAll(lang) {
        if (typeof window.applyPassengerLang === "function") {
          window.applyPassengerLang(lang);
        } else if (typeof window.applyTranslations === "function") {
          window.applyTranslations(lang);
        }
      }
      function initializeApp() {
        let lang = 'vi';
        try {
          lang = localStorage.getItem('preferredLanguage') || 'vi';
          localStorage.setItem('preferredLanguage', lang);
        } catch {}
        fetch('components/header.html')
          .then(r => r.text()).then(html => {
            const n = document.getElementById('header-container'); if (n) n.innerHTML = html;
            applyAll(lang);
          }).catch(() => applyAll(lang));

        fetch('components/footer.html')
          .then(r => r.text()).then(html => {
            const n = document.getElementById('footer-container'); if (n) n.innerHTML = html;
            applyAll(lang);
          }).catch(() => {});
      }
      document.addEventListener('DOMContentLoaded', initializeApp);
    })();
  </script>
</body>
</html>
