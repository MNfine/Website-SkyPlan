<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyPlan - Chọn ghế</title>
  <meta name="description" content="Chọn ghế ngồi phù hợp cho chuyến bay của bạn.">

  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <link rel="stylesheet" href="assets/styles/reset.css">
  <link rel="stylesheet" href="assets/styles/index.css">
  <link rel="stylesheet" href="assets/styles/flags.css">
  <link rel="stylesheet" href="assets/styles/header.css">
  <link rel="stylesheet" href="assets/styles/footer.css">
  <link rel="stylesheet" href="assets/styles/seat.css">
</head>
<body>
  <div id="header-container"></div>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <div class="seat-selection-page">
        <!-- Page Title -->
        <div class="page-header">
          <h1 class="page-title">Choose your seat</h1>
          <p class="flight-info">Select seats for flight VN 1234 from Ho Chi Minh to Hanoi</p>
        </div>

        <!-- Seat Selection Layout -->
        <div class="seat-layout">
          <!-- Seat Map Container -->
          <div class="seat-map-container">
            <!-- Airplane Shape -->
            <div class="airplane">
              <!-- Business Class Section -->
              <div class="cabin-section business-class-section">
                <h3 class="section-header">Business Class</h3>
                
                <!-- Row 1 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat business-class" data-seat="1A">1A</div>
                    <div class="seat business-class" data-seat="1B">1B</div>
                    <div class="seat business-class" data-seat="1C">1C</div>
                    <div class="seat-gap"></div>
                    <div class="seat business-class" data-seat="1D">1D</div>
                    <div class="seat business-class" data-seat="1E">1E</div>
                    <div class="seat business-class" data-seat="1F">1F</div>
                  </div>
                </div>
                
                <!-- Row 2 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat business-class occupied" data-seat="2A">2A</div>
                    <div class="seat business-class" data-seat="2B">2B</div>
                    <div class="seat business-class" data-seat="2C">2C</div>
                    <div class="seat-gap"></div>
                    <div class="seat business-class" data-seat="2D">2D</div>
                    <div class="seat business-class" data-seat="2E">2E</div>
                    <div class="seat business-class occupied" data-seat="2F">2F</div>
                  </div>
                </div>
                
                <!-- Row 3 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat business-class" data-seat="3A">3A</div>
                    <div class="seat business-class selected" data-seat="3B">3B</div>
                    <div class="seat business-class" data-seat="3C">3C</div>
                    <div class="seat-gap"></div>
                    <div class="seat business-class" data-seat="3D">3D</div>
                    <div class="seat business-class" data-seat="3E">3E</div>
                    <div class="seat business-class" data-seat="3F">3F</div>
                  </div>
                </div>
                
                <!-- Row 4 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat business-class" data-seat="4A">4A</div>
                    <div class="seat business-class" data-seat="4B">4B</div>
                    <div class="seat business-class" data-seat="4C">4C</div>
                    <div class="seat-gap"></div>
                    <div class="seat business-class" data-seat="4D">4D</div>
                    <div class="seat business-class" data-seat="4E">4E</div>
                    <div class="seat business-class" data-seat="4F">4F</div>
                  </div>
                </div>
              </div>

              <!-- Premium Economy Section -->
              <div class="cabin-section premium-economy-section">
                <h3 class="section-header">Premium Economy</h3>
                
                <!-- Row 5 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat premium-economy" data-seat="5A">5A</div>
                    <div class="seat premium-economy" data-seat="5B">5B</div>
                    <div class="seat premium-economy" data-seat="5C">5C</div>
                    <div class="seat-gap"></div>
                    <div class="seat premium-economy" data-seat="5D">5D</div>
                    <div class="seat premium-economy" data-seat="5E">5E</div>
                    <div class="seat premium-economy" data-seat="5F">5F</div>
                  </div>
                </div>
                
                <!-- Row 6 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat premium-economy" data-seat="6A">6A</div>
                    <div class="seat premium-economy" data-seat="6B">6B</div>
                    <div class="seat premium-economy selected" data-seat="6C">6C</div>
                    <div class="seat-gap"></div>
                    <div class="seat premium-economy" data-seat="6D">6D</div>
                    <div class="seat premium-economy" data-seat="6E">6E</div>
                    <div class="seat premium-economy" data-seat="6F">6F</div>
                  </div>
                </div>
                
                <!-- Row 7 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat premium-economy" data-seat="7A">7A</div>
                    <div class="seat premium-economy occupied" data-seat="7B">7B</div>
                    <div class="seat premium-economy" data-seat="7C">7C</div>
                    <div class="seat-gap"></div>
                    <div class="seat premium-economy" data-seat="7D">7D</div>
                    <div class="seat premium-economy" data-seat="7E">7E</div>
                    <div class="seat premium-economy" data-seat="7F">7F</div>
                  </div>
                </div>
              </div>

              <!-- Economy Class Section -->
              <div class="cabin-section economy-section">
                <h3 class="section-header">Economy Class</h3>
                
                <!-- Row 8 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="8A">8A</div>
                    <div class="seat economy" data-seat="8B">8B</div>
                    <div class="seat economy" data-seat="8C">8C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="8D">8D</div>
                    <div class="seat economy" data-seat="8E">8E</div>
                    <div class="seat economy" data-seat="8F">8F</div>
                  </div>
                </div>
                
                <!-- Row 9 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="9A">9A</div>
                    <div class="seat economy" data-seat="9B">9B</div>
                    <div class="seat economy" data-seat="9C">9C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="9D">9D</div>
                    <div class="seat economy" data-seat="9E">9E</div>
                    <div class="seat economy" data-seat="9F">9F</div>
                  </div>
                </div>
                
                <!-- Row 10 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="10A">10A</div>
                    <div class="seat economy" data-seat="10B">10B</div>
                    <div class="seat economy" data-seat="10C">10C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="10D">10D</div>
                    <div class="seat economy" data-seat="10E">10E</div>
                    <div class="seat economy" data-seat="10F">10F</div>
                  </div>
                </div>
                
                <!-- Row 11 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="11A">11A</div>
                    <div class="seat economy" data-seat="11B">11B</div>
                    <div class="seat economy" data-seat="11C">11C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="11D">11D</div>
                    <div class="seat economy" data-seat="11E">11E</div>
                    <div class="seat economy" data-seat="11F">11F</div>
                  </div>
                </div>
                
                <!-- Row 12 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="12A">12A</div>
                    <div class="seat economy" data-seat="12B">12B</div>
                    <div class="seat economy" data-seat="12C">12C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="12D">12D</div>
                    <div class="seat economy" data-seat="12E">12E</div>
                    <div class="seat economy" data-seat="12F">12F</div>
                  </div>
                </div>
                
                <!-- Row 13 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="13A">13A</div>
                    <div class="seat economy" data-seat="13B">13B</div>
                    <div class="seat economy" data-seat="13C">13C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="13D">13D</div>
                    <div class="seat economy" data-seat="13E">13E</div>
                    <div class="seat economy" data-seat="13F">13F</div>
                  </div>
                </div>
                
                <!-- Row 14 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="14A">14A</div>
                    <div class="seat economy" data-seat="14B">14B</div>
                    <div class="seat economy" data-seat="14C">14C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="14D">14D</div>
                    <div class="seat economy" data-seat="14E">14E</div>
                    <div class="seat economy" data-seat="14F">14F</div>
                  </div>
                </div>
                
                <!-- Row 15 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="15A">15A</div>
                    <div class="seat economy" data-seat="15B">15B</div>
                    <div class="seat economy" data-seat="15C">15C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="15D">15D</div>
                    <div class="seat economy" data-seat="15E">15E</div>
                    <div class="seat economy" data-seat="15F">15F</div>
                  </div>
                </div>
                
                <!-- Row 16 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="16A">16A</div>
                    <div class="seat economy" data-seat="16B">16B</div>
                    <div class="seat economy" data-seat="16C">16C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="16D">16D</div>
                    <div class="seat economy" data-seat="16E">16E</div>
                    <div class="seat economy" data-seat="16F">16F</div>
                  </div>
                </div>
                
                <!-- Row 17 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="17A">17A</div>
                    <div class="seat economy" data-seat="17B">17B</div>
                    <div class="seat economy" data-seat="17C">17C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="17D">17D</div>
                    <div class="seat economy" data-seat="17E">17E</div>
                    <div class="seat economy" data-seat="17F">17F</div>
                  </div>
                </div>
                
                <!-- Row 18 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="18A">18A</div>
                    <div class="seat economy" data-seat="18B">18B</div>
                    <div class="seat economy" data-seat="18C">18C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="18D">18D</div>
                    <div class="seat economy" data-seat="18E">18E</div>
                    <div class="seat economy" data-seat="18F">18F</div>
                  </div>
                </div>
                
                <!-- Row 19 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="19A">19A</div>
                    <div class="seat economy" data-seat="19B">19B</div>
                    <div class="seat economy" data-seat="19C">19C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="19D">19D</div>
                    <div class="seat economy" data-seat="19E">19E</div>
                    <div class="seat economy" data-seat="19F">19F</div>
                  </div>
                </div>
                
                <!-- Row 20 -->
                <div class="seat-row">
                  <div class="seats">
                    <div class="seat economy" data-seat="20A">20A</div>
                    <div class="seat economy" data-seat="20B">20B</div>
                    <div class="seat economy" data-seat="20C">20C</div>
                    <div class="seat-gap"></div>
                    <div class="seat economy" data-seat="20D">20D</div>
                    <div class="seat economy" data-seat="20E">20E</div>
                    <div class="seat economy" data-seat="20F">20F</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Selection Panel -->
          <div class="selection-panel">
            <div class="panel-content">
              <h3 class="panel-title">Your Seat Selection</h3>
              
              <div class="selected-seats">
                <p class="selected-label">Selected seats:</p>
                <p class="seat-numbers">1A, 2E, 5D</p>
              </div>

              <div class="annotation">
                <h4 class="annotation-title">Annotation</h4>
                <div class="legend">
                  <div class="legend-item">
                    <div class="legend-color business-class"></div>
                    <span>Business Class</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color premium-economy"></div>
                    <span>Premium Economy</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color economy"></div>
                    <span>Economy Class</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color occupied"></div>
                    <span>Occupied</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color selected"></div>
                    <span>Selecting</span>
                  </div>
                </div>
              </div>

              <button class="continue-btn">Continue</button>
            </div>
          </div>
  </main>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- JavaScript -->
  <script src="assets/scripts/index_translations.js"></script>
  <script src="assets/scripts/index.js"></script>

  <!-- Load Components -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Function to handle component loading errors
      function handleComponentError(componentName) {
        console.error(`Failed to load ${componentName} component`);
      }
      
      // Load header
      fetch('components/header.html')
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.text();
        })
        .then(data => {
          document.getElementById('header-container').innerHTML = data;
          // Initialize language functionality after header loads
          initializeLanguage();
        })
        .catch(error => {
          handleComponentError('header');
          initializeLanguage();
        });
      
      // Load footer
      fetch('components/footer.html')
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.text();
        })
        .then(data => {
          document.getElementById('footer-container').innerHTML = data;
        })
        .catch(error => {
          handleComponentError('footer');
        });

      // Seat selection functionality
      initializeSeatSelection();
    });

    // Initialize language functionality
    function initializeLanguage() {
      let currentLang = localStorage.getItem('preferredLanguage');
      if (!currentLang) {
        currentLang = 'vi';
        localStorage.setItem('preferredLanguage', 'vi');
      }
      
      document.documentElement.lang = currentLang;
      
      if (typeof applyTranslations === 'function') {
        applyTranslations(currentLang);
      }
      
      if (typeof initializeLanguageSelector === 'function') {
        initializeLanguageSelector();
      }
    }

    // Seat selection functionality
    function initializeSeatSelection() {
      const seats = document.querySelectorAll('.seat:not(.occupied)');
      const selectedSeatsDisplay = document.querySelector('.seat-numbers');
      const continueBtn = document.querySelector('.continue-btn');
      let selectedSeats = ['1A', '2E', '5D']; // Pre-selected seats from design

      // Update selected seats display
      function updateSelectedDisplay() {
        if (selectedSeats.length === 0) {
          selectedSeatsDisplay.textContent = '—';
        } else {
          selectedSeatsDisplay.textContent = selectedSeats.sort().join(', ');
        }
      }

      // Add click handlers to seats
      seats.forEach(seat => {
        seat.addEventListener('click', function() {
          const seatCode = this.dataset.seat;
          
          if (this.classList.contains('selected')) {
            // Deselect seat
            this.classList.remove('selected');
            selectedSeats = selectedSeats.filter(s => s !== seatCode);
          } else {
            // Select seat
            this.classList.add('selected');
            selectedSeats.push(seatCode);
          }
          
          updateSelectedDisplay();
        });
      });

      // Continue button functionality
      continueBtn.addEventListener('click', function(e) {
        if (selectedSeats.length === 0) {
          e.preventDefault();
          alert('Please select at least one seat before continuing.');
        } else {
          // Navigate to next page or handle selection
          window.location.href = 'extras.html';
        }
      });

      // Initialize display
      updateSelectedDisplay();
    }
  </script>
</body>
</html>